<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CHEM 180 Grade Calculator</title>

<style>
body {
  font-family: Arial, sans-serif;
  max-width: 650px;
  margin: 40px auto;
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 8px;
  background: #f9f9f9;
}

h1 {
  text-align: center;
}

label {
  font-weight: bold;
}

input[type="number"],
input[type="range"],
select {
  width: 100%;
  padding: 8px;
  margin: 6px 0 12px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
}

button {
  width: 100%;
  padding: 10px;
  background-color: #0074D9;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  cursor: pointer;
  margin-top: 10px;
}

button:hover {
  background-color: #005fa3;
}

#result {
  text-align: center;
  font-size: 20px;
  margin-top: 20px;
  font-weight: bold;
}

#foList {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 15px;
}

#foList label {
  font-weight: normal;
}

progress {
  width: 100%;
  height: 20px;
  margin-bottom: 15px;
}
</style>
</head>

<body>

<h1>CHEM 180 Grade Calculator</h1>

<!-- FO Mastery -->
<label>FO Mastery (check all mastered):</label>
<div id="foList"></div>

<!-- CO Points -->
<label for="co">CO Points Earned (0–18): <span id="coVal">0</span></label>
<input type="range" id="co" min="0" max="18" step="1" value="0"
oninput="document.getElementById('coVal').innerText = this.value">

<!-- Group Project -->
<label for="project">Group Project Spec:</label>
<select id="project">
  <option value="A">A-Spec</option>
  <option value="B">B-Spec</option>
  <option value="C">C-Spec</option>
  <option value="none">No Spec</option>
</select>

<!-- Course Activities -->
<label for="courseAct">Course Activities %:</label>
<input type="number" id="courseAct" min="0" max="100" placeholder="Enter %">
<progress id="courseBar" value="0" max="100"></progress>

<button onclick="calculateGrade()">Calculate Grade</button>

<div id="result"></div>

<script>
// Generate 32 FO checkboxes
const foContainer = document.getElementById('foList');
const totalFOs = 32;

for(let i = 1; i <= totalFOs; i++){
  const checkbox = document.createElement('input');
  checkbox.type = 'checkbox';
  checkbox.id = 'fo' + i;

  const label = document.createElement('label');
  label.htmlFor = 'fo' + i;
  label.innerText = 'FO' + i;

  foContainer.appendChild(checkbox);
  foContainer.appendChild(label);
}

// Update progress bar
document.getElementById("courseAct").addEventListener("input", function(){
  let val = Math.min(Math.max(this.value,0),100);
  document.getElementById("courseBar").value = val;
});

function calculateGrade(){

  // Count FO
  let foScore = 0;
  for(let i = 1; i <= totalFOs; i++){
    if(document.getElementById('fo'+i).checked) foScore++;
  }

  // CO
  let coScore = parseInt(document.getElementById('co').value) || 0;

  // Project
  let project = document.getElementById('project').value;

  // Activity %
  let activity = parseFloat(document.getElementById('courseAct').value) || 0;

  // Convert project spec to numeric hierarchy
  let projectLevel = 0;
  if(project === "C") projectLevel = 1;
  if(project === "B") projectLevel = 2;
  if(project === "A") projectLevel = 3;

  // Grade determination function
  function determineGrade(fo, co){
    let grade = "F";

    if(projectLevel >= 3 && activity >= 90){
      if(fo >= 30 && co >= 15) return "A";
      if(fo >= 28 && co >= 13) return "A-";
    }

    if(projectLevel >= 2 && activity >= 80){
      if(fo >= 26 && co >= 11) return "B+";
      if(fo >= 24 && co >= 9) return "B";
      if(fo >= 22 && co >= 8) return "B-";
    }

    if(projectLevel >= 1 && activity >= 70){
      if(fo >= 20 && co >= 6) return "C+";
      if(fo >= 19 && co >= 5) return "C";
      if(fo >= 18 && co >= 4) return "C-";
    }

    if(fo >= 10 && activity >= 50){
      return "D";
    }

    return "F";
  }

  // Current grade
  let currentGrade = determineGrade(foScore, coScore);

  // Highest possible grade if all remaining FO/COs mastered
  let highestPossible = determineGrade(32, 18);

  document.getElementById("result").innerHTML =
    "Your Eligible Grade: " + currentGrade +
    "<br><br>⭐ Highest Possible Grade: " + highestPossible;
}
</script>

</body>
</html>
